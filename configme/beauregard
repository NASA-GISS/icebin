#!/bin/sh

#MPI_ROOT=$HOME/opt/openmpi-1.6.4
#MPI_ROOT=/usr

#rm -rf build;mkdir build;cd build
#export PETSC_DIR=$HOME/opt/petsc-3.4.3
#export PETSC_ARCH=arch-darwin-c-debug
#export CMAKE_PREFIX_PATH=$HOME/opt/netcdf-4.3.1.1:$MPI_ROOT
#export MPI_LIBRARY=$MPI_ROOT/lib
#export PISM_INSTALL_PREFIX=$HOME/opt/pism
#export CXX=$MPI_ROOT/bin/mpicxx
#export CC=$MPI_ROOT/bin/mpicc

PREREQ_ROOT=$HOME/opt/glint2_prereq
GCC_ROOT=$HOME/opt/gcc-4.8.2
NETCDF_HOME=$HOME/opt/netcdf-4.3.1.1
NETCDF_FORTRAN_HOME=$HOME/opt/netcdf-fortran-4.2
NETCDF_CXX_HOME=$HOME/opt/netcdf-cxx-4.2
CGAL_HOME=$HOME/opt/cgal-4.0.2
BLITZXX_HOME=$HOME/opt/blitz-0.10
BOOST_ROOT=$HOME/opt/boost-1.55.0

export BOOST_INCLUDEDIR=$BOOST_ROOT/include
export BOOST_LIBRARYDIR=$BOOST_ROOT/lib

#	-DBOOST_ROOT=$HOME/opt/boost-1.55.0 \

cmake \
	-DCMAKE_INCLUDE_PATH=$PREREQ_ROOT/include \
	-DCMAKE_LIBRARY_PATH=$PREREQ_ROOT/lib \
	-DCMAKE_CXX_FLAGS="-Wl,-rpath -Wl,$GCC_ROOT/lib64" \
	-DCMAKE_INSTALL_PREFIX:PATH=$HOME/opt/glint2 \
	-DPETSC_DIR=$HOME/opt/petsc-3.4.3 \
	-DPETSC_ARCH=arch-linux2-c-opt \
	-DBoost_NO_SYSTEM_PATHS=TRUE \
	-DBOOST_ROOT=$BOOST_ROOT \
	-DPROJ_ROOT=$PREREQ_ROOT \
	-DNETCDF_INCLUDES=$NETCDF_HOME/include \
	-DCGAL_ROOT=$CGAL_HOME \
	-DBLITZ++_PKGCONF_INCLUDE_DIRS=$BLITZXX_HOME/include \
	-DBLITZ++_PKGCONF_LIBRARY_DIRS=$BLITZXX_HOME/lib \
	-DPISM_SRC=$HOME/git/pism/src \
	-DPISM_LIB=$HOME/opt/pism/lib \
	-DGALAHAD_ROOT=$HOME/opt/galahad \
	-DGALAHAD_ARCH=pc64.lnx.gfo \
	$@

#cmake -DCMAKE_C_COMPILER=$MPI_ROOT/bin/mpicc $@

#	-DBoost_INCLUDE_DIR=$BOOST_ROOT/include \
#	-DBoost_LIBRARY_DIR=$BOOST_ROOT/lib \

#	-DBoost_NO_SYSTEM_PATHS=TRUE \
#	-DBoost_INCLUDE_DIR=$BOOST_ROOT/include \
#	-DBoost_LIBRARY_DIR=$BOOST_ROOT/lib \


#	-DNETCDF_INCLUDES_F77=$NETCDF_FORTRAN_HOME/include \
#	-DNETCDF_LIBRARIES_F77=$NETCDF_FORTRAN_HOME/lib \
#	-DNETCDF_INCLUDES_CXX=$NETCDF_CXX_HOME/include \
#	-DNETCDF_LIBRARIES_CXX=$NETCDF_CXX_HOME/lib \
#	-DNETCDF_LIBRARIES=$NETCDF_HOME/lib \
#	-DCGAL_INCLUDE_DIR=$CGAL_HOME/include \
#	-DCGAL_LIBRARIES=$CGAL_HOME/lib \

